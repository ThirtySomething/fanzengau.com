<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Avoid rsync Disaster</title>
  <link rel="stylesheet" type="text/css" href="/css/default.css">
  <link rel="stylesheet" type="text/css" href="/css/fanzengau.css">
  <link rel="stylesheet" type="text/css" href="/css/share_on_social_media.css">
  <link rel="stylesheet" type="text/css" href="/css/atelier-dune-light.css">
  <script type="text/javascript" src="/vendor/scripts/jquery.min.js"></script>
  <script type="text/javascript" src="/scripts/index.js"></script>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async>
  </script>
  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
</head>
<body>
<div id="main_frame_header"></div>
<div id="content">
  <script type="text/javascript" src="/scripts/index.js"></script>
  <div id="side_panels"></div>
  <div class="column_uneven_2_6_3_center">
	<div class="section">
		<h2>Avoid rsync disaster</h2>
	</div>
	<div class="section">
		<p>In Linux commands, often times a trailing slash ("/") does not make a difference when referring to directories. For instance</p>

		<p>However there comes times when we do need to be careful about trailing slashes. I'm not referring to situations in which a supplied path is going to be concatenated with a file name - a decent program should take care of that (for instance, in Python, better use os.path.join instead of path + filename to generate a full path). Here I'm talking about situations when the existence of a trailing slash triggers a different action to be taken by the program.</p>

		<p>Specifying files and directories to be ignored by Git in .gitignore is definitely one example, but that's another (long) story. Another instance that can cause big issues is rsync.</p>

		<p>rsync is often used in the back up process. Sometime you'd like to the two copies to be exactly replica of each other. If there are files that have been deleted in the source folder, rsync will not delete them unless you set the "--delete" parameter. Now you've probably guessed where I'm heading.</p>

		<p>The most important take-away lesson: Always, always do a dry run (with "-n") whenever you have "--delete" in your rsync command. Only remove the "-n" for the actual run. If anything else has also been changed, do another dry run.</p>

		<p>When backing up large file systems, a cautious dev-op will monitor the rsync process at least for a few initial seconds, and be ready to "Ctrl-C" if something does not seem right, before leaving for lunch.</p>
	</div>
    <div id="center_column_footer"></div>

  </div>
  <script> 
  $(function(){
    $("#main_frame_header").load("/include/main_frame_header.html"); 
    $("#side_panels").load("/include/side_panels.html");
    $("#center_column_footer").load("/include/center_column_footer.html"); 
  });
  </script> 
</div>
</body>
</html>
